<!DOCTYPE html>
<html>
<head>
  <title>User Location Demo</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
  <style>
    #map { height: 400px; width: 100%; }
    button { padding: 10px 20px; margin-top: 10px; }
  </style>
</head>
<body>
  <button id="locBtn">Get My Location</button>
  <div id="map"></div>

  <script>
    const btn = document.getElementById('locBtn');
    const mapDiv = document.getElementById('map');

    btn.addEventListener('click', () => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        alert("Geolocation not supported by your browser");
      }
    });

    function showPosition(position) {
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      const map = new google.maps.Map(mapDiv, {
        center: { lat, lng },
        zoom: 14,
      });

      new google.maps.Marker({
        position: { lat, lng },
        map: map,
        title: "You are here!",
      });

      // Optional: send to backend
      fetch('/api/save-location', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ lat, lng })
      });
    }

    function showError(err) {
      alert("Error getting location: " + err.message);
    }
  </script>
  <script type="text/javascript">
(function (d, t) {
  var v = d.createElement(t),
      s = d.getElementsByTagName(t)[0];

  v.onload = function () {
    window.voiceflow.chat.load({
      verify: { projectID: '68cd40925682320b1b0539ba' },
      url: 'https://general-runtime.voiceflow.com',
      versionID: 'production',
      voice: {
        url: 'https://runtime-api.voiceflow.com'
      }
    });
  };

  v.src = 'https://cdn.voiceflow.com/widget-next/bundle.mjs';
  v.type = 'text/javascript';
  s.parentNode.insertBefore(v, s);
})(document, 'script');
</script>

</body>
</html>
